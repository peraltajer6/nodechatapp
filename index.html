<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Firebase Chat App</title>
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <!-- Auth screen (login/signup) -->
    <div id="authScreen" class="screen active">
      <div class="auth-card">
        <h1>Chat App</h1>
        
        <div class="tabs">
          <button class="tab-btn active" data-tab="login">Login</button>
          <button class="tab-btn" data-tab="signup">Sign Up</button>
        </div>

        <!-- Login Tab -->
        <form id="loginForm" class="tab-content active">
          <h2>Login</h2>
          <input type="text" id="loginUsername" placeholder="Username" required />
          <input type="password" id="loginPassword" placeholder="Password" required />
          <button type="submit">Login</button>
          <p id="loginError" class="error"></p>
        </form>

        <!-- Signup Tab -->
        <form id="signupForm" class="tab-content">
          <h2>Sign Up</h2>
          <input type="text" id="signupUsername" placeholder="Username" required />
          <input type="password" id="signupPassword" placeholder="Password" required />
          <input type="password" id="signupConfirm" placeholder="Confirm Password" required />
          <button type="submit">Sign Up</button>
          <p id="signupError" class="error"></p>
        </form>
      </div>
    </div>

    <!-- Chat screen (after login) -->
    <div id="chatScreen" class="screen">
      <div class="chat-container">
        <!-- Left panel: Panels (Users / Groups / Admin) -->
        <aside class="user-list-panel">
          <div class="panel-header">
            <h2>Directory</h2>
            <div class="header-buttons">
              <button id="deleteAcctBtn" class="delete-btn">üóëÔ∏è Delete Account</button>
              <button id="logoutBtn" class="logout-btn">Logout</button>
            </div>
          </div>

          <div class="panel-tabs">
            <button class="panel-tab-btn active" data-panel="users">Users</button>
            <button class="panel-tab-btn" data-panel="groups">Groups</button>
            <button id="adminTabBtn" class="panel-tab-btn" data-panel="admin" style="display:none;">Admin</button>
          </div>

          <div class="panel-contents">
            <div id="usersPanel" class="panel-content active">
              <input id="userSearch" type="text" placeholder="Search users..." class="search-input" />
              <ul id="usersList" class="users-list"></ul>
            </div>

            <div id="groupsPanel" class="panel-content">
              <div class="groups-header">
                <h3>Groups</h3>
                <button id="createGroupBtn" class="create-group-btn">+ New Group</button>
              </div>
              <ul id="groupsList" class="groups-list"></ul>
            </div>

            <div id="adminPanel" class="panel-content">
              <div class="admin-controls">
                <button id="viewUsersBtn" class="admin-btn">View Users</button>
                <button id="viewGroupHistoryBtn" class="admin-btn">View Group History</button>
                <button id="viewMsgHistoryBtn" class="admin-btn">View Message History</button>
              </div>
            </div>
          </div>
        </aside>

        <!-- Right panel: Chat/Profile/Admin views -->
        <main class="chat-panel">
          <div id="profileView" class="profile-view">
            <div class="profile-placeholder">Select a user to view profile or start messaging</div>
          </div>

          <div id="chatView" class="chat-view" style="display: none;">
            <header class="chat-header">
              <h2 id="chatWith"></h2>
            </header>
            <ul id="messages" class="messages-list"></ul>
            <form id="messageForm" class="message-form">
              <input id="messageInput" type="text" placeholder="Type a message..." autocomplete="off" />
              <button type="submit">Send</button>
            </form>
          </div>

          <div id="groupChatView" class="chat-view" style="display: none;">
            <header class="chat-header">
              <h2 id="groupChatTitle"></h2>
            </header>
            <ul id="groupMessages" class="messages-list"></ul>
            <form id="groupMessageForm" class="message-form">
              <input id="groupMessageInput" type="text" placeholder="Type a message to group..." autocomplete="off" />
              <button type="submit">Send</button>
            </form>
          </div>

          <div id="adminView" class="admin-view" style="display:none;">
            <button id="adminBackBtn" class="admin-back">Back</button>
            <div id="adminViewContent"></div>
          </div>
        </main>
      </div>
    </div>

    <!-- Create Group Modal -->
    <div id="createGroupModal" class="modal" style="display:none;">
      <div class="modal-content">
        <h3>Create Group</h3>
        <input id="groupNameInput" placeholder="Group name" />
        <div id="groupMembersInput" class="group-members"></div>
        <div class="modal-buttons">
          <button id="confirmCreateGroupBtn">Create</button>
          <button id="cancelCreateGroupBtn">Cancel</button>
        </div>
      </div>
    </div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

    <script src="/main.js"></script>
  </body>
</html>
